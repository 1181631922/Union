<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.education.union.dao.ShopDao">
    <select id="countShopOrderById" resultType="Integer">
        select count(0)
        from t_shopping_order so
        where so.delete_status=0
        and so.user_id = #{userId}
    </select>

    <select id="getShopOrder" resultType="com.alibaba.fastjson.JSONObject">
        select so.id                 shopOrderId,
            so.total_price           totalPrice,
            so.status                   status,
            DATE_FORMAT(so.create_time, '%Y.%m.%d %T')              createTime,
            DATE_FORMAT(so.update_time, '%Y.%m.%d %T')             updateTime
        from t_shopping_order so
        where so.delete_status=0
            and so.user_id=#{userId}
    </select>

    <update id="delGoods" >
        update t_shopping_son_order sso
        set sso.delete_status=1
        where sso.shopping_order_id=#{shopOrderId}
        and sso.goods_id = #{goodsId}
            and sso.delete_status=0
    </update>

</mapper>